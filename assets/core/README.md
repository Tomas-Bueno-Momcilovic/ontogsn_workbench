# `assets/core/` — Core Files Overview

This directory contains the core “app shell” for the OntoGSN Playground: global UI styling, bootstrapping, pane/tab management, a lightweight event bus, query orchestration, and the RDF/SPARQL runtime built on Oxigraph (WASM).

| File | Contribution (one paragraph) |
|---|---|
| `app.css` | Defines the main application layout and shared UI styling: the fixed 50/50 split between left and right panes, the tab/button look-and-feel, the SPARQL results table formatting, and common scroll/overflow constraints to keep panes stable. It also includes the lazy-load loading overlay (` .pane-loading ` / ` .pane-spinner `), document tooltip styling for entity hover details, and a small “code panel” style that prevents long code blocks or IRIs from breaking the layout. |
| `boot.js` | Serves as the app entrypoint that wires the system together: it initializes the query/store layer via ` queries.init() `, injects shared context into the pane manager via ` panes.setContext({ queries }) `, registers all left/right panes as lazy imports, and finally initializes both tab groups (` panes.initLeftTabs() ` and ` panes.initRightTabs() `) so the UI starts with the correct active views. |
| `events.js` | Provides a tiny, dependency-free event bus built on ` EventTarget ` that the rest of the app can use for cross-module communication without tight coupling. It exports helpers to register listeners (` on `, ` once `), emit events (` emit `), and optionally forward events to ` window ` for compatibility (` emitCompat ` / ` makeEmitter `), plus a shared singleton bus instance (` bus `). |
| `panes.js` | Implements the PaneManager that connects tab clicks to pane activation and handles pane lifecycle safely. It resolves tab buttons from ` data-tab-group ` containers, hides/shows pane root elements, lazy-imports pane modules on demand, and calls optional lifecycle hooks (` mount `, ` resume `, ` suspend `, ` unmount `), including cleanup handling and race-protection via per-slot activation sequence counters. It also manages a “right controller” concept (e.g., graphs) via ` panes.setRightController(...) `, auto-fitting on window resize and destroying prior controllers when switching. |
| `queries.js` | Acts as the high-level query facade used by panes: it initializes the RDF store once (via ` initStore() `), creates a query service wrapper, and exposes convenience methods to run queries by file path (` runPath `) or inline (` runText `). It also keeps backwards-compatible aliases (` run `, ` runInline `) and provides ` selectBindings() ` for panes that need raw RDFJS-like terms instead of display strings. |
| `utils.js` | Collects shared low-level helpers used across panes and core: robust fetch-with-caching (` fetchText `), repo-relative URL resolution to avoid GitHub Pages path pitfalls (` repoHref `, ` fetchRepoText `), template mounting and single-link CSS loading (` mountTemplate `, ` ensureCss `), plus many DOM/data utilities (safe lookup with ` resolveEl ` / ` firstEl `, defensive calls via ` safeInvoke `, simple ID generation via ` uid `). It also includes RDF/text helpers like IRI shortening (` shortenIri `), literal cleanup, code highlighting integration (` highlightCode `), and small localStorage convenience helpers. |
| `rdf/config.js` | Centralizes all RDF runtime configuration: MIME types, base IRIs/prefix roots, dataset paths to Turtle files, and frequently used SPARQL query paths. It supports runtime overrides stored in localStorage (` RUNTIME_CONFIG_KEY `) and applies them at module load so the store will use updated paths/IRIs without editing source; it also rebuilds the ordered dataset list (` DATASETS `) consistently from defaults or overrides. |
| `rdf/store.js` | Owns Oxigraph initialization and dataset loading: it bootstraps the WASM runtime, constructs a single ` Store `, fetches each Turtle dataset listed in ` DATASETS `, and loads them with the configured MIME type and base. It includes guardrails like detecting “HTML instead of Turtle” responses (usually from bad paths/404s) and wraps parse errors with a helpful preview, while exposing ` initStore() ` and ` getStore() ` for the rest of the app. |
| `rdf/queryService.js` | Provides a small, UI-agnostic service layer around an existing Oxigraph Store that can run SPARQL from inline text or from repo files. It detects UPDATE vs SELECT using ` isUpdateQuery() `, routes UPDATE to ` store.update(...) `, converts SELECT bindings to row objects, and returns a normalized ` QueryResult ` with timing information so panes can render results consistently without embedding store logic. |
| `rdf/sparql.js` | Implements simple SPARQL parsing/display utilities that keep query handling predictable: it finds the first “meaningful” keyword while skipping PREFIX/BASE/comments, classifies UPDATE queries, converts RDF terms into readable strings, transforms binding iterators into plain row objects, and shortens IRIs for compact labels using either ` #fragment ` or the last path segment. |
| `README.md` | Documents the purpose of the ` assets/core/ ` directory and explains what each core file contributes so developers can quickly understand how the shell, pane manager, events, query layer, and RDF runtime fit together. It serves as the onboarding reference for extending the Playground safely (e.g., adding panes, adjusting dataset config, or tracing where UI behaviors come from). |
